---
title: 9.redux
createTime: 2025/08/26 21:42:02
permalink: /article/nju0p02n/
---

### Store

### action
Redux要求我们通过action来更新数据：（好处：是可以清晰的知道数据到底发生了什么样的变化，所有的数据变化都是可跟追、可预测的）
- 所有数据的变化，必须通过派发（dispatch）action来更新；
- action是一个普通的JavaScript对象，用来描述这次更新的type和content；
```jsx
const action1 = {type:'Change_Name',name:'wanting'}
store.dispatch(action1)
```

### reducer
reducer是一个纯函数；reducer做的事情就是将传入的state和action结合起来生成一个新的state；
```jsx
function reducer(state = initState,action){
  switch (action.type){
    case "Change_Name":
      return {...state,action.info}
    default:
      return state
  }
}
```

标准的store管理目录：
```jsx
index.js  ---store
reducer.js ---reducer和默认store值
actionCreators.js ---派发的action
constants.js --- 字符串常量
```

::: tip 提示
Redux三大原则：(面试)
- 单一数据源。
整个state都被存储在一个store里面，单一的数据源可以让整个应用程序的state变得方便维护、追踪、修改
- State是只读的。
唯一修改State的方法一定是触发action，不要试图在其他地方通过任何的方式来修改State
- 使用纯函数来执行修改。
通过reducer将 旧state和 actions联系在一起，并且返回一个新的State
::: 

组件中使用：
- componentDidMount生命周期store.subscribe(()=>{})=>this.state => render  

组件中修改：
- store.dispatch(addNumberAction(num))

### React中的state如何管理
- UI相关的组件内部可以维护的状态，在组件内部自己来维护
- 大部分需要共享的状态，都交给redux来管理和维护
- 从服务器请求的数据（包括请求的操作），交给redux来维护